# Firebase App Hosting configuration
# See: https://firebase.google.com/docs/app-hosting/configure

# Build configuration
build:
  commands:
    - npm ci
    - cp next.config.apphosting.js next.config.js
    - npm run build
  
# Runtime configuration
runtime:
  # Node.js runtime version
  nodeVersion: "20"
  # Memory allocation
  memory: 1024
  # CPU allocation
  cpu: 1
  # Timeout
  timeout: 60

# Environment variables
env:
  # Build optimization
  - variable: NEXT_TELEMETRY_DISABLED
    value: "1"
    availability:
      - BUILD
      - RUNTIME
  - variable: NODE_OPTIONS
    value: "--max_old_space_size=2048"
    availability:
      - BUILD
  
  # App configuration
  - variable: NEXT_PUBLIC_APP_URL
    value: "https://gliter.com.ar"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_APP_NAME
    value: "Gliter"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_APP_VERSION
    value: "1.0.0"
    availability:
      - BUILD
      - RUNTIME
  
  # Firebase configuration
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyBs4YagBaR9gXnFLE_tfHhWARpOZdo7m38"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "soygay-b9bc5.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "soygay-b9bc5"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "soygay-b9bc5.appspot.com"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "982386751624"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:982386751624:web:20a3ee764ec4c6f0da073d"
    availability:
      - BUILD
      - RUNTIME
  
  # App Check configuration (temporal - deshabilitado)
  - variable: NEXT_PUBLIC_RECAPTCHA_SITE_KEY
    value: "6Lc9IcwrAAAAAN0Sk6c0O8hKkr6DVaWbOAV-Aqpw"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_DISABLE_APP_CHECK
    value: "true"
    availability:
      - BUILD
      - RUNTIME
  
  # Security and features
  - variable: NEXT_PUBLIC_ENABLE_ANALYTICS
    value: "true"
    availability:
      - RUNTIME
  - variable: NEXT_PUBLIC_ENABLE_NOTIFICATIONS
    value: "true"
    availability:
      - RUNTIME
  - variable: NEXT_PUBLIC_ENABLE_GEOLOCATION
    value: "true"
    availability:
      - RUNTIME
  
  # Rate limiting
  - variable: NEXT_PUBLIC_RATE_LIMIT_ENABLED
    value: "true"
    availability:
      - RUNTIME
  - variable: NEXT_PUBLIC_RATE_LIMIT_REQUESTS
    value: "100"
    availability:
      - RUNTIME
  - variable: NEXT_PUBLIC_RATE_LIMIT_WINDOW
    value: "900000"
    availability:
      - RUNTIME