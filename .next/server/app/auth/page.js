(()=>{var e={};e.id=235,e.ids=[235],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(9974),s(9079),s(5866);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),o=s(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c=["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9974)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\auth\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9079)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\Documents\\app\\src\\app\\auth\\page.tsx"],u="/auth/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3551:(e,t,s)=>{Promise.resolve().then(s.bind(s,121))},7636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},121:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(326),a=s(7577),i=s(5047),l=s(445),o=s(6618),n=s(76),c=s(1552),d=s(7636),u=s(4019),m=s(3685);let x=()=>{let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null);return{location:e,loading:s,error:i,refetch:()=>{if(r(!0),l(null),!navigator.geolocation){l("Geolocalizacion no soportada por este navegador"),r(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:a}=e.coords;t({lat:s,lng:a}),r(!1)},e=>{l("Error obteniendo ubicacion: "+e.message),r(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}}};var p=s(6226);let h=({isLogin:e,loading:t,onLogin:s,onRegister:i})=>{let[l,o]=(0,a.useState)({nombre:"",edad:18,genero:"",email:"",password:"",rolSexual:void 0,fotoPerfil:null,fotosAdicionales:[],ubicacion:void 0}),[n,c]=(0,a.useState)({email:"",password:""}),[h,f]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1),{location:j,loading:y,error:v,refetch:N}=x(),w=(0,a.useRef)(null),q=(0,a.useRef)(null),k=t=>{let{name:s,value:r,type:a}=t.target,i="number"===a?parseInt(r):r;e?c(e=>({...e,[s]:i})):o(e=>({...e,[s]:i}))},A=e=>{if(0===e)o(e=>({...e,fotoPerfil:null}));else{let t=[...l.fotosAdicionales];t.splice(e-1,1),o(e=>({...e,fotosAdicionales:t}))}let t=[...h];t.splice(e,1),f(t)};(0,a.useEffect)(()=>{b&&j&&o(e=>({...e,ubicacion:j}))},[j,b]);let P=t=>{if(t.preventDefault(),e)s(n.email,n.password);else{if(!l.fotoPerfil){alert("La foto de perfil es obligatoria");return}i(l)}};return e?(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email-login",name:"email",value:n.email,onChange:k,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrasena"}),r.jsx("input",{type:"password",id:"password-login",name:"password",value:n.password,onChange:k,className:"input-field",required:!0})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Iniciando sesion...":"Iniciar Sesion"})]}):(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx("input",{type:"text",id:"nombre",name:"nombre",value:l.nombre,onChange:k,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"edad",className:"block text-sm font-medium text-gray-700 mb-1",children:"Edad"}),r.jsx("input",{type:"number",id:"edad",name:"edad",value:l.edad,onChange:k,min:"18",max:"100",className:"input-field",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"genero",className:"block text-sm font-medium text-gray-700 mb-1",children:"Genero"}),(0,r.jsxs)("select",{id:"genero",name:"genero",value:l.genero,onChange:k,className:"input-field",required:!0,children:[r.jsx("option",{value:"",children:"Selecciona tu genero"}),r.jsx("option",{value:"Hombre",children:"Hombre"}),r.jsx("option",{value:"Mujer",children:"Mujer"}),r.jsx("option",{value:"No binario",children:"No binario"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"rolSexual",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol Sexual (Opcional)"}),(0,r.jsxs)("select",{id:"rolSexual",name:"rolSexual",value:l.rolSexual||"",onChange:k,className:"input-field",children:[r.jsx("option",{value:"",children:"No especificar"}),r.jsx("option",{value:"activo",children:"Activo"}),r.jsx("option",{value:"pasivo",children:"Pasivo"}),r.jsx("option",{value:"versatil",children:"Versatil"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email-register",name:"email",value:l.email,onChange:k,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrasena"}),r.jsx("input",{type:"password",id:"password-register",name:"password",value:l.password,onChange:k,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"useLocation",checked:b,onChange:()=>{let e=!b;g(e),e?N():o(e=>({...e,ubicacion:void 0}))},className:"form-checkbox h-4 w-4 text-primary-600 transition duration-150 ease-in-out"}),r.jsx("label",{htmlFor:"useLocation",className:"text-sm font-medium text-gray-700",children:"Usar mi ubicaci\xf3n actual"})]}),b&&y&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(d.Z,{className:"w-4 h-4 mr-1"})," Obteniendo ubicacion..."]}),b&&v&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-1"})," Error al obtener ubicacion: ",v]}),b&&j&&(0,r.jsxs)("p",{className:"text-sm text-green-600 flex items-center",children:[r.jsx(d.Z,{className:"w-4 h-4 mr-1"})," Ubicacion obtenida: ",j.lat.toFixed(2),", ",j.lng.toFixed(2)]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"profile-photo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto de Perfil (Obligatoria)"}),r.jsx("input",{type:"file",id:"profile-photo",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){o(e=>({...e,fotoPerfil:t}));let e=new FileReader;e.onload=e=>{let t=e.target?.result;f(e=>[t,...e.slice(1)])},e.readAsDataURL(t)}},ref:w,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>w.current?.click(),className:"btn-secondary w-full flex items-center justify-center",children:[r.jsx(m.Z,{className:"w-5 h-5 mr-2"})," Subir Foto de Perfil"]}),l.fotoPerfil&&(0,r.jsxs)("div",{className:"mt-2 relative w-24 h-24 rounded-full overflow-hidden mx-auto",children:[r.jsx(p.default,{src:h[0],alt:"Foto de Perfil",layout:"fill",objectFit:"cover"}),r.jsx("button",{type:"button",onClick:()=>A(0),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:r.jsx(u.Z,{className:"w-3 h-3"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"additional-photos",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fotos Adicionales (Max. 2)"}),r.jsx("input",{type:"file",id:"additional-photos",accept:"image/*",multiple:!0,onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>0){let e=t.slice(0,2-l.fotosAdicionales.length);o(t=>({...t,fotosAdicionales:[...t.fotosAdicionales,...e]})),e.forEach(e=>{let t=new FileReader;t.onload=e=>{let t=e.target?.result;f(e=>[...e,t])},t.readAsDataURL(e)})}},ref:q,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>q.current?.click(),className:"btn-secondary w-full flex items-center justify-center",disabled:l.fotosAdicionales.length>=2,children:[r.jsx(m.Z,{className:"w-5 h-5 mr-2"})," Subir Fotos Adicionales"]}),r.jsx("div",{className:"mt-2 flex space-x-2 justify-center",children:h.slice(1).map((e,t)=>(0,r.jsxs)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden",children:[r.jsx(p.default,{src:e,alt:`Foto adicional ${t+1}`,layout:"fill",objectFit:"cover"}),r.jsx("button",{type:"button",onClick:()=>A(t+1),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:r.jsx(u.Z,{className:"w-3 h-3"})})]},t))})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Registrando...":"Registrarse"})]})};var f=s(3058);let b=()=>{let[e,t]=(0,a.useState)(!0),[s,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),x=(0,i.useRouter)(),p=e=>"object"==typeof e&&e&&"message"in e?String(e.message||""):"Error desconocido",b=async(e,t)=>{let s=(0,c.iH)(l.tO,t),r=await (0,c.KV)(s,e,{contentType:e.type||"image/jpeg"});return await (0,c.Jt)(r.ref)},g=async(e,t)=>{d(!0),m("");try{await (0,o.e5)(l.I8,e,t),x.push("/")}catch(e){m("Error al iniciar sesion: "+p(e))}finally{d(!1)}},j=async e=>{d(!0),m("");try{let t=(await (0,o.Xb)(l.I8,e.email,e.password)).user,s="";e.fotoPerfil&&(s=await b(e.fotoPerfil,`users/${t.uid}/profile/profile.jpg`));let r=[];for(let s=0;s<e.fotosAdicionales.length;s++){let a=e.fotosAdicionales[s],i=await b(a,`users/${t.uid}/gallery/additional_${s}.jpg`);r.push(i)}await (0,n.pl)((0,n.JU)(l.db,"users",t.uid),{email:t.email,createdAt:(0,n.Bt)(),nombre:e.nombre,edad:e.edad,genero:e.genero,rolSexual:e.rolSexual||null,fotoPerfil:s,fotosAdicionales:r,ubicacion:e.ubicacion||{lat:0,lng:0},favoritos:[],bloqueados:[],lastOnline:(0,n.Bt)()}),await (0,n.pl)((0,n.JU)(l.db,"publicProfiles",t.uid),{displayName:e.nombre,age:e.edad,lastActive:(0,n.Bt)(),gender:e.genero,photoURL:s,location:e.ubicacion||{lat:0,lng:0}}),x.push("/")}catch(e){m("Error al registrarse: "+p(e))}finally{d(!1)}};return r.jsx(f.Z,{requireAuth:!1,children:r.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:r.jsx("span",{className:"text-accent-400",children:"Gliter"})}),r.jsx("p",{className:"text-primary-100",children:"Encuentra tu match perfecto"})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,"aria-pressed":e,children:"Iniciar Sesion"}),r.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e?"text-gray-600 hover:text-gray-900":"bg-white text-primary-600 shadow-sm"}`,"aria-pressed":!e,children:"Registrarse"})]})}),u&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",role:"alert",children:u}),r.jsx(h,{isLogin:e,loading:s,onLogin:g,onRegister:j})]}),r.jsx("div",{className:"text-center mt-6 text-primary-100 text-sm",children:"Al continuar, aceptas nuestros terminos y condiciones"})]})})})}},3058:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(326),a=s(7577),i=s(5047),l=s(1201);let o=({children:e,redirectTo:t="/auth",requireAuth:s=!0})=>{let{isAuthenticated:o,loading:n}=(0,l.E)(),c=(0,i.useRouter)();return((0,a.useEffect)(()=>{n||(s&&!o?c.push(t):!s&&o&&c.push("/"))},[o,n,s,t,c]),n)?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Verificando autenticacion..."})]})}):s&&!o||!s&&o?null:r.jsx(r.Fragment,{children:e})}},9974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\Admin\Documents\app\src\app\auth\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,407,226,699],()=>s(1203));module.exports=r})();